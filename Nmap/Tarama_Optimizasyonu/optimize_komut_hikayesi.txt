Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2025-11-10T22:10:15+03:00

====== optimize komut hikayesi ======
Created Monday 10 November 2025

**GeniÅŸ Ã–zet: â€œScanning 676,352 IP Addresses in 46 Hoursâ€**

Bu metin, **Mayo Clinicâ€™teki Jack L. Mogren** tarafÄ±ndan kaleme alÄ±nmÄ±ÅŸ gerÃ§ek bir deneyim Ã¶ykÃ¼sÃ¼dÃ¼r. AynÄ± zamanda bir **Ã¶ÄŸretici rehber** niteliÄŸindedir. Yazar, Ã§ok bÃ¼yÃ¼k bir kurumsal aÄŸda **Nmap kullanarak dÃ¼zenli tarama sistemini** nasÄ±l kurduÄŸunu ve **tarama sÃ¼resini bir haftadan 46 saate** nasÄ±l dÃ¼ÅŸÃ¼rdÃ¼ÄŸÃ¼nÃ¼ anlatÄ±r.  

---

### âš™ï¸ BaÅŸlangÄ±Ã§ Durumu: Devasa ve KarÄ±ÅŸÄ±k Bir AÄŸ

- **Mayo Clinic** kurumunun Amerika genelinde Ã¼Ã§ bÃ¼yÃ¼k kampÃ¼s ve onlarca yan istasyonu bulunan Ã§ok geniÅŸ bir Ã¶zel aÄŸÄ± vardÄ±r.  
- AÄŸ Ã¼zerinde **70.000â€™den fazla aktif IP adresi** bulunmaktaydÄ±.  
- AÄŸ yÃ¶netimi genellikle **altyapÄ± kurulumu** ile sÄ±nÄ±rlÄ±ydÄ±. Yani â€œihtiyacÄ±n varsa biz kurarÄ±zâ€ anlayÄ±ÅŸÄ± hakimdi.  
- Ancak, **aÄŸ iÃ§inde nelerin baÄŸlÄ± olduÄŸunu** bilen kimse yoktu. GÃ¼venlik Ã¶nlemleri sadece dÄ±ÅŸ sÄ±nÄ±rda gÃ¼Ã§lÃ¼ydÃ¼; iÃ§ aÄŸ zayÄ±f korumaya sahipti (yazar bu durumu "candy bar syndrome" benzetmesiyle aÃ§Ä±klar: dÄ±ÅŸÄ± sert, iÃ§i yumuÅŸak).  

---

### ğŸ’¥ DÃ¶nÃ¼m NoktasÄ±: Slammer VirÃ¼sÃ¼ (2003)

- 2003 yÄ±lÄ± baÅŸÄ±nda **Slammer (W32.SQLExp)** isimli bilgisayar kurdu aÄŸa bulaÅŸtÄ±.  
- Bu virÃ¼s, **MS SQL Server 2000** ve **MSDE 2000** yÃ¼klÃ¼ sistemleri hedef alÄ±yordu.  
- Ancak kimse bu hizmetlerin aÄŸ Ã¼zerinde **nerede ve kim tarafÄ±ndan yÃ¶netildiÄŸini** bilmiyordu.  
- Bilgi eksikliÄŸi nedeniyle, virÃ¼sle mÃ¼cadele **aylarca sÃ¼rdÃ¼.**

Bu olay, kurumun anlayÄ±ÅŸÄ±nÄ± deÄŸiÅŸtirdi. ArtÄ±k hedef â€œ**AÄŸda ne olduÄŸunu bilmek (Know whatâ€™s on the network)**â€ olmalÄ±ydÄ±.  

---

### ğŸ§° Ã‡Ã¶zÃ¼m: Nmap ile DÃ¼zenli AÄŸ Tarama Sistemi

Yazar, bu hedefe ulaÅŸmak iÃ§in aÃ§Ä±k kaynaklÄ± ve Ã¼cretsiz olan **Nmap** aracÄ±nÄ± kullanmaya karar verdi.  
- Ã–zellikle **iÅŸletim sistemi tespiti (OS fingerprinting)** Ã¶zelliÄŸi ve **kullanÄ±cÄ± katkÄ±larÄ±ndan** faydalanÄ±labileceÄŸini vurgular.  
- AmaÃ§: AÄŸ Ã¼zerindeki cihazlarÄ±n listesini Ã§Ä±karmak ve hangi tÃ¼r cihazlar olduÄŸunu otomatik tanÄ±mlamak.

---

### âš¡ Teknik SÃ¼reÃ§: Denemeler, Ayarlar ve Optimizasyon

1. **Ä°lk Tarama:**
   - KullanÄ±lan komut:
	 ```
	 nmap -O -PE -v -oX mayo.xml -iL ip_networks.txt
	 ```
   - Bu aÄŸda **676.352 IP adresi** mevcuttu.
   - Tarama Ã§ok yavaÅŸ ilerliyordu; hÄ±zÄ±na gÃ¶re tamamlanmasÄ± **yaklaÅŸÄ±k 1 hafta** sÃ¼recekti.

2. **Ä°yileÅŸtirmeler:**
   - **Zamanlama politikasÄ± (â€“T5)**: â€œinsaneâ€ hÄ±z modu seÃ§ildi.
   - **HÄ±zlÄ± tarama (â€“F)**: daha az port (1600 yerine yaklaÅŸÄ±k 1200) tarÄ±yor.
   - **â€“osscan-limit**: yalnÄ±zca aÃ§Ä±k portu olan makinelerde iÅŸletim sistemi tespiti yapÄ±yor.

   Yeni komut:
   ```
   nmap -O -T5 -PE -F --osscan-limit -v -oX mayo.xml -iL ip_networks.txt
   ```
   Buna raÄŸmen tarama hÃ¢lÃ¢ birkaÃ§ gÃ¼n sÃ¼rÃ¼yordu.

3. **Daha Fazla KÄ±saltma:**
   - `nmap-services` dosyasÄ± dÃ¼zenlenerek taranan port sayÄ±sÄ± **270â€™e indirildi.**
   - SÃ¼re **49 saate** dÃ¼ÅŸtÃ¼.

4. **Son Ayarlar:**
   - AyrÄ±ntÄ±lÄ± Ã§Ä±ktÄ± (verbose) kaldÄ±rÄ±ldÄ±, Ã§Ä±ktÄ± dosyasÄ± /dev/nullâ€™a yÃ¶nlendirildi.
   - Bu deÄŸiÅŸikliklerle **tarama sÃ¼resi 46 saate** indi.

   Nihai komut:
   ```
   nmap -O -T5 -PE -F --osscan-limit --max-rtt-timeout 100ms \
		--max-parallelism 100 --min-hostgroup 100 \
		-oX mayo.xml -iL ip_networks.txt
   ```

- **SonuÃ§:** 66.558 cihaz aktif olarak tespit edildi.

---

### ğŸ“Š SonuÃ§lar ve Devam PlanlarÄ±

- Yazar, bu taramayÄ± **haftalÄ±k olarak** tekrarlamayÄ± planlamaktadÄ±r.
- Ã‡Ä±ktÄ±lar **XML formatÄ±nda** kaydedilip bir **MS SQL veritabanÄ±na** aktarÄ±lacaktÄ±r.  
- DiÄŸer tarama verileriyle birleÅŸtirildiÄŸinde, kurum artÄ±k **aÄŸÄ±n tamamÄ±nÄ± haritalayabilmekte** ve â€œaÄŸda ne varâ€ sorusuna yanÄ±t verebilmektedir.
- Gelecekte tarama yÃ¼kÃ¼nÃ¼ birden fazla sisteme bÃ¶lmeyi planlamaktadÄ±r.

---

### ğŸ¯ Ã–nemli Noktalar

- **GÃ¼venliÄŸin temeli, Ã¶nce neye sahip olduÄŸunu bilmektir.**
- **AÄŸ envanteri** oluÅŸturmadan etkili gÃ¼venlik saÄŸlamak mÃ¼mkÃ¼n deÄŸildir.  
- **Nmap**, doÄŸru ayarlarla dev aÄŸlarda bile etkili bir araÃ§tÄ±r.  
- **Optimizasyon (port azaltma, hÄ±z politikalarÄ±, filtreleme)** ciddi zaman kazandÄ±rÄ±r.  
- **Slammer olayÄ±**, proaktif aÄŸ gÃ¼venliÄŸinin neden gerekli olduÄŸunu gÃ¶stermiÅŸtir.  

---

**KÄ±saca:**  
Mayo Clinic, bir virÃ¼s saldÄ±rÄ±sÄ±ndan sonra aÄŸÄ±nÄ± tam olarak tanÄ±mak ve kontrolÃ¼ ele almak istemiÅŸtir. Jack L. Mogren, Nmap aracÄ±nÄ± kullanarak yÃ¼z binlerce IP adresini dÃ¼zenli ve hÄ±zlÄ± biÃ§imde tarayabilecek bir yÃ¶ntem geliÅŸtirmiÅŸ, aÄŸÄ±n gerÃ§ek yapÄ±sÄ±nÄ± ortaya Ã§Ä±karmayÄ± baÅŸarmÄ±ÅŸtÄ±r. Tarama sÃ¼resi 1 haftadan 46 saate indirilmiÅŸ, gÃ¼venlik yÃ¶netimi ise veriye dayalÄ± hale getirilmiÅŸtir.
