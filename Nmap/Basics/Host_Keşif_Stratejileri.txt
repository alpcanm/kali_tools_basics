Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2025-11-10T20:13:52+03:00

====== Host KeÅŸif Stratejileri ======
Created Monday 10 November 2025

https://nmap.org/book/host-discovery-strategies.html

Tamam. AÅŸaÄŸÄ±da, verdiÄŸin uzun metnin kapsamlÄ± ama sade bir Ã¶zeti ve ana fikirlerin aÃ§Ä±klamasÄ± yer alÄ±yor.  
Bu metin, **Nmapâ€™in â€œHost Discoveryâ€ (ev sahibi keÅŸfi / ping taramasÄ±) stratejilerini** ve bu sÃ¼reÃ§te kullanÄ±lan **Ã¶nemli opsiyonlarÄ±** anlatÄ±yor. Yani Nmapâ€™in bir aÄŸda hangi makinelerin â€œaktifâ€ (aÃ§Ä±k ve ulaÅŸÄ±labilir) olduÄŸunu belirlemek iÃ§in kullandÄ±ÄŸÄ± yÃ¶ntemler ve bu yÃ¶ntemleri etkileyen parametreler ele alÄ±nÄ±yor.  

---

## 1. Host Discovery Nedir?
Host Discovery (veya ping taramasÄ±), Nmapâ€™in bir aÄŸda hangi cihazlarÄ±n yanÄ±t verdiÄŸini belirleme aÅŸamasÄ±dÄ±r. Nmap, port taramadan Ã¶nce genelde â€œhangi cihazlar aÃ§Ä±k?â€ sorusuna cevap bulmak iÃ§in Ã§eÅŸitli **problar (ping tÃ¼rleri)** gÃ¶nderir.  
AmaÃ§, aÄŸda canlÄ± olan IPâ€™leri bulmak ve gereksiz yere kapalÄ± olan adreslerde zaman kaybetmemektir.

---

## 2. Ping TaramasÄ±nÄ± Etkileyen SeÃ§enekler (Ã–nemli Parametreler)

Metinde bu kÄ±sÄ±m oldukÃ§a detaylÄ± anlatÄ±lmÄ±ÅŸ. Temel baÅŸlÄ±klar:

### **-v (--verbose)**
Daha fazla bilgi verir. Normalde sadece aktif hostâ€™larÄ± gÃ¶sterir; -v eklenirse ulaÅŸÄ±lamayan hostâ€™lar da gÃ¶rÃ¼nÃ¼r.

### **--source-port (veya -g)**
TÃ¼m paketlerin kaynak portunu sabitler (Ã¶rnek: `--source-port 53`).  
BazÄ± gÃ¼venlik duvarlarÄ± DNS (53) veya FTP-data (20) trafiÄŸine izin verdiÄŸi iÃ§in, bu portlardan gelen sahte taramalar firewallâ€™u aÅŸabilir. Bu nedenle bazen gizlenmek iÃ§in kullanÄ±lÄ±r.

### **-n ve -R**
- `-n`: DNS Ã§Ã¶zÃ¼mlemesini tamamen kapatÄ±r (zaman kazandÄ±rÄ±r).  
- `-R`: Her host iÃ§in DNS sorgusu yapar, kapalÄ± olanlar dÃ¢hil.  
DNS sorgularÄ± taramayÄ± yavaÅŸlatabileceÄŸi iÃ§in dikkatli kullanÄ±lmalÄ±dÄ±r.

### **--dns-servers**
Alternatif DNS sunucularÄ± tanÄ±mlanabilir. Bu, Ã¶zellikle `reverse DNS` (geri Ã§Ã¶zÃ¼mleme) iÅŸlemlerini hÄ±zlandÄ±rabilir.

### **--data-length <length>**
Her pakete belirli miktarda â€œrastgele veriâ€ ekler.  
AmaÃ§, trafiÄŸi sÄ±radan ping trafiÄŸine benzeterek IDS (Intrusion Detection System) sistemlerinden gizlenmektir.  
Ã–rnek: `--data-length 56` â†’ Linux pingâ€™ine benzer, `32` â†’ Windows pingâ€™ine benzer paket boyutu.

### **--ttl <value>**
Paketin Time To Live (yaÅŸam sÃ¼resi) deÄŸeri ayarlanabilir.  
Bu sayede tarama sadece yerel aÄŸa kÄ±sÄ±tlanabilir ya da gerÃ§ek ping programÄ±nÄ± taklit edebilir. DÃ¶ngÃ¼ oluÅŸturan aÄŸlarda TTL kÄ±saltmak router yÃ¼kÃ¼nÃ¼ azaltÄ±r.

### **Canned Timing Options (-T0 â†’ -T5)**
Bu, hÄ±z ayarlarÄ±dÄ±r.  
- `-T3` â†’ normal,  
- `-T4` â†’ hÄ±zlÄ±, gÃ¼venilir baÄŸlantÄ±larda Ã¶nerilir,  
- `-T5` â†’ Ã§ok hÄ±zlÄ± ama gÃ¼rÃ¼ltÃ¼lÃ¼ (IDSâ€™leri tetikleyebilir).

### **--max-parallelism / --min-parallelism**
AynÄ± anda kaÃ§ IPâ€™ye sorgu (probe) gÃ¶nderileceÄŸini belirler. Daha fazla paralellik = daha hÄ±zlÄ± tarama, ama daha fazla aÄŸ yÃ¼kÃ¼.

### **--min-rtt-timeout / --max-rtt-timeout / --initial-rtt-timeout**
Nmapâ€™in ping yanÄ±tÄ± bekleme sÃ¼resini kontrol eder.

### **-iL <dosya> / -iR <sayÄ±>**
Girdi yÃ¶ntemleridir:  
- `-iL`: IP listesi dosyadan okunur.  
- `-iR`: Rasgele IP adresleri seÃ§er (internet genelinde test iÃ§in kullanÄ±labilir).

### **-oA, -oN, -oG, -oX**
Ã‡Ä±ktÄ± formatlarÄ±nÄ± belirler. TÃ¼m Ã§Ä±ktÄ± tÃ¼rleri (normal, XML, grepable) ping taramaya da uygulanabilir.

### **--randomize-hosts**
Host tarama sÄ±rasÄ±nÄ± karÄ±ÅŸtÄ±rÄ±r. Bu, aÄŸ izleme sistemleri iÃ§in daha az dikkat Ã§ekici olabilir.

### **--reason**
Bir hostâ€™un neden â€œupâ€ (aktif) gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nÃ¼ belirtir (Ã¶rneÄŸin, ICMP yanÄ±tÄ± mÄ± aldÄ±, yoksa RST mi dÃ¶ndÃ¼?).

### **--packet-trace**
Her gÃ¶nderilen ve alÄ±nan paketi ayrÄ±ntÄ±lÄ± olarak gÃ¶sterir. GeliÅŸmiÅŸ hata ayÄ±klama iÃ§in kullanÄ±lÄ±r.

### **-D (decoy)**
Decoy (Ã¶rtÃ¼cÃ¼) IP adresleri ekler; saldÄ±rganÄ± gizlemek iÃ§in. IDSâ€™ler bu durumda kimin gerÃ§ek tarama yaptÄ±ÄŸÄ±nÄ± ayÄ±rt etmekte zorlanÄ±r.

### **-6**
IPv6 iÃ§in TCP tabanlÄ± ping taramasÄ± kullanÄ±lÄ±r.

### **-S ve -e**
Paketin gÃ¶nderileceÄŸi IP adresini (`-S`) ve aÄŸ arayÃ¼zÃ¼nÃ¼ (`-e`) belirtir.

---

## 3. Ping TaramasÄ±nda En Etkili Problar (Test Edilen TÃ¼rler)

Metin, Nmap geliÅŸtiricilerinin 2009â€™daki bir araÅŸtÄ±rmasÄ±ndan bahsediyor.  
FarklÄ± ping yÃ¶ntemleri binlerce host Ã¼zerinde test edilerek **hangi paket tÃ¼rlerinin en Ã§ok yanÄ±t aldÄ±ÄŸÄ±** Ã¶lÃ§Ã¼lmÃ¼ÅŸ.  
SonuÃ§lar Ã¶zetle:

| En Etkili Ping TÃ¼rÃ¼             | AÃ§Ä±klama                                                                          |
|---------------------------------|-----------------------------------------------------------------------------------|
| **-PE (ICMP Echo Request)**     | En etkili yÃ¶ntem. Klasik ping.                                                    |
| **-PA80, -PS443 (TCP SYN/ACK)** | HTTP veya HTTPS gibi sÄ±k kullanÄ±lan portlara yapÄ±lan SYN/ACK istekleri etkilidir. |
| **-PP (ICMP Timestamp)**        | Zaman damgasÄ± isteÄŸi; echo engellenmiÅŸ bazÄ± aÄŸlarda iÅŸe yarar.                    |
| **-PU (UDP yÃ¼ksek portlar)**    | `--source-port 53` ve `--data-length 24` ile birleÅŸtirilirse daha etkili olur.    |
| **-PM (ICMP Address Mask)**     | En az etkili yÃ¶ntem.                                                              |

Yani Ã¶zetle:
â¡ En Ã§ok iÅŸe yarayan: ICMP Echo (-PE)  
â¡ ArdÄ±ndan TCP SYN/ACK port 80/443  
â¡ UDP pingâ€™ler ek katkÄ± saÄŸlÄ±yor  
â¡ ICMP mask / Ã¶zel IP pingi en az iÅŸe yarayanlar.

---

## 4. En Ä°yi Kombinasyonlar (Tablo 3.3 SonuÃ§larÄ±)

Nmap ekipleri, hangi **kombinasyonun en Ã§ok hostâ€™u bulduÄŸunu** da test etmiÅŸ:  

- **1 prob:** `-PE` â†’ %62  
- **2 prob:** `-PE -PA80` â†’ %77  
- **4 prob (Nmap varsayÄ±lan):** `-PE -PA80 -PS443 -PP` â†’ %88  
- **6+ prob:** UDP ve daha fazla TCP port eklenince %92â€“93â€™e Ã§Ä±kÄ±yor.

ğŸ‘‰ **SonuÃ§:**  
Nmapâ€™in **varsayÄ±lan dÃ¶rt prob** stratejisi (%88 baÅŸarÄ±) hem hÄ±zlÄ± hem de etkili bir denge sunuyor.  
Daha fazla prob eklemek doÄŸruluÄŸu artÄ±rÄ±r ama sÃ¼reyi de uzatÄ±r.

---

## 5. TCP Port SeÃ§imi

- **AmaÃ§:** SYN/ACK paketlerini en Ã§ok yanÄ±t alabileceÄŸimiz portlara gÃ¶ndermektir.  
- **En "canlÄ±" portlar:**  
  80 (HTTP), 443 (HTTPS), 113 (auth), 21 (FTP), 23 (Telnet), 25 (SMTP), 22 (SSH), 110 (POP3), 3389 (RDP), 8080 (proxy).  

ğŸ‘‰ **Yorum:**  
YÃ¶neticiler genelde ICMPâ€™yi engeller ama bu TCP portlarÄ±nÄ± aÃ§Ä±k bÄ±rakÄ±r, o yÃ¼zden TCP ping Ã§ok etkilidir.  
Ancak Ã¶rneÄŸin **port 113â€™ten gelen RST (Reset)** yanÄ±tlarÄ± bazen â€œsahte olumluâ€ (false positive) oluÅŸturabilir.

**Ek Tavsiye:**  
- Port listesi oluÅŸtururken farklÄ± tÃ¼rde servisleri seÃ§ (Ã§eÅŸitlilik artÄ±rÄ±r).  
- YalnÄ±zca art arda gelen benzer portlarÄ± seÃ§mek etkisiz olur (Ã¶rnek: 80 ve 443 yerine 80 ve 22 seÃ§mek mantÄ±klÄ±).  
- BirkaÃ§ yÃ¼ksek port (Ã¶rnek 40000) eklemek faydalÄ±dÄ±r, Ã§Ã¼nkÃ¼ bazÄ± firewallâ€™lar sadece dÃ¼ÅŸÃ¼k portlarÄ± engeller.

---

## 6. UDP Port SeÃ§imi

UDP taramada durum farklÄ±dÄ±r Ã§Ã¼nkÃ¼:
- AÃ§Ä±k portlar genelde **yanÄ±t vermez**.  
- KapalÄ± portlar â€œICMP Port unreachableâ€ dÃ¶ner, bu bize â€œhost canlÄ±â€ bilgisini saÄŸlar.  
Bu yÃ¼zden amaÃ§ **filtrelenmemiÅŸ** portlara denk gelmektir.

Ã–neriler:
- **53 (DNS)** genelde iyi sonuÃ§ verir.  
- AyrÄ±ca yÃ¼ksek, rastgele bir port (Ã¶rneÄŸin 37452) denenebilir.  
- SNMP (161) bazen firewall tarafÄ±ndan engellense de denenebilir.

---

## 7. ICMP Probe TÃ¼rleri

- **Echo Request (-PE):** En yaygÄ±n ve en etkili.
- **Timestamp (-PP):** SÃ¼re Ã¶lÃ§Ã¼mÃ¼ iÃ§in; echo kapalÄ± aÄŸlarda iÅŸe yarar.
- **Address Mask (-PM):** Ã‡ok az kullanÄ±lan ama bazen iÅŸe yarayabilir.

---

## 8. UygulamalÄ± Ã–rnekler

### **Default tarama (4 prob, hÄ±zlÄ±)**
```bash
nmap -n -sn -T4 -iL 50K_IPs -oA 50KHosts_DefaultPing
```
â†’ 50.000 adresi 42 dakikada taradÄ±, 3927 host bulundu.

### **GeniÅŸletilmiÅŸ tarama (14 prob, yavaÅŸ ama kapsamlÄ±)**
```bash
nmap -n -sn -PE -PP -PS21,22,23,25,80,113,443,31339 \
-PA80,113,443,10042 -T4 --source-port 53 -iL 50K_IPs -oA 50KHosts_ExtendedPing
```
â†’ 50.000 adresi 147 dakikada taradÄ±, 4712 host bulundu (yaklaÅŸÄ±k %20 daha fazla).

**SonuÃ§:**  
Daha fazla prob = daha Ã§ok host bulma, ama sÃ¼re ~3.5 kat daha uzun.  
AyrÄ±ca sahte pozitif riskleri artar (Ã¶rneÄŸin firewallâ€™un kendisi yanÄ±t verebilir).

---

## 9. Pratik Ã–neriler ve Stratejik DÃ¼ÅŸÃ¼nme

- **Ä°Ã§ aÄŸlar iÃ§in:** Nmapâ€™in varsayÄ±lan tarama tÃ¼rÃ¼ genelde yeterlidir.  
- **DÄ±ÅŸ aÄŸlar (internet Ã¼zeri):** Daha fazla prob (ICMP + TCP + UDP) eklemek Ã¶nerilir.  
- **AmaÃ§ Ã§eÅŸitliliktir:** FarklÄ± protokoller ve portlar seÃ§ilirse baÅŸarÄ± artar.  
- **Kaynak port 53 kullanÄ±mÄ±:** BazÄ± firewallâ€™larÄ± aÅŸarak daha fazla host tespit edilebilir.  
- **Tarama sÃ¼resi:** Her ek prob, sÃ¼renin orantÄ±lÄ± ÅŸekilde artmasÄ±na neden olur.

---

## ğŸ”¹ Ã–ZETLE

Metin ÅŸunu anlatÄ±yor:

1. **Host discovery**, Nmapâ€™in bir aÄŸda hangi makinelerin aktif olduÄŸunu saptama aÅŸamasÄ±dÄ±r.  
2. Bu aÅŸama, ICMP, TCP, UDP ve IP temelli ping tÃ¼rleriyle yapÄ±lÄ±r.  
3. Nmapâ€™te birÃ§ok **opsiyon** ping taramasÄ±nÄ± hÄ±z, gizlilik, doÄŸruluk ve kapsam aÃ§Ä±sÄ±ndan etkiler.  
4. **En etkili prob ICMP Echo (-PE)**â€™dir, ancak sadece buna gÃ¼venmek hatalÄ± olur. TCP portlarÄ±na SYN/ACK gÃ¶ndermek (80, 443, 22, vs.) ve UDP sorgularÄ± eklemek baÅŸarÄ±yÄ± artÄ±rÄ±r.  
5. **VarsayÄ±lan Nmap kombinasyonu** (â€“PE -PA80 -PS443 -PP) hÄ±z ve doÄŸrulukta iyi dengededir.  
6. BÃ¼yÃ¼k taramalarda DNS Ã§Ã¶zÃ¼mleme ve paralellik ayarlarÄ±na dikkat edilmelidir.  
7. Daha fazla prob eklendikÃ§e taramanÄ±n sÃ¼resi artar ama aÄŸda gerÃ§ekten yaÅŸayan cihazlarÄ±n kaÃ§Ä±rÄ±lma ihtimali azalÄ±r.  
8. GÃ¼venlik analistleri, geniÅŸ taramalarda farklÄ± protokolleri ve portlarÄ± harmanlayan geliÅŸmiÅŸ probe kombinasyonlarÄ±nÄ± kullanmalÄ±dÄ±r.

---

KÄ±saca:
> Metin, **ping taramasÄ±nÄ± verimli, hÄ±zlÄ± ve tespit edilmesi zor hÃ¢le getirmek iÃ§in** hangi Nmap seÃ§eneklerinin nasÄ±l kullanÄ±lacaÄŸÄ±nÄ± ve hangi prob kombinasyonlarÄ±nÄ±n en iyi sonuÃ§ verdiÄŸini anlatÄ±yor.  
> AyrÄ±ca ICMP, TCP ve UDP temelli yÃ¶ntemlerin avantajlarÄ±nÄ±, hangi portlarÄ±n daha duyarlÄ± olduÄŸunu ve farklÄ± aÄŸ yapÄ±larÄ±na gÃ¶re stratejik seÃ§imler yapÄ±lmasÄ± gerektiÄŸini aÃ§Ä±klÄ±yor.
